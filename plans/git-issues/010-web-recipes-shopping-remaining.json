{
  "number": 10,
  "title": "Web dashboard: recipes, shopping list, pantry, brands, and preferences pages",
  "state": "open",
  "labels": [
    {"name": "phase:3-ui"},
    {"name": "priority:P1"},
    {"name": "component:frontend"}
  ],
  "milestone": {"title": "Phase 3: User Interfaces"},
  "body": "## Summary\n\nBuild the remaining web dashboard pages, following the patterns established in #9. This covers recipes (CRUD + search), shopping list (with generation pipeline), pantry staples, brand preferences, and user preferences.\n\n## Acceptance Criteria\n\n### Recipes pages\n\n#### recipes.html (GET /recipes)\n- [ ] List all recipes as cards/rows\n- [ ] Show: recipe name, times ordered, ingredient count, source\n- [ ] Search/filter bar (client-side)\n- [ ] \"Add Recipe\" button linking to /recipes/add\n- [ ] Each recipe links to /recipes/<id>\n\n#### recipe_detail.html (GET /recipes/<id>)\n- [ ] Display recipe name, description, servings, source\n- [ ] Ingredient list grouped by purchase vs pantry items\n- [ ] Each ingredient: name, quantity, unit, category\n- [ ] \"Edit\" button (inline edit or form toggle)\n- [ ] \"Delete\" button with confirmation\n- [ ] 404 page if recipe not found\n\n#### recipe_add.html (GET /recipes/add)\n- [ ] Two input modes:\n  1. **Structured form**: recipe name, servings, then ingredient rows (name, qty, unit, category) with add/remove row buttons\n  2. **Natural language box**: free text that gets sent to Claude for parsing (POST to /recipes/add with `mode=natural`)\n- [ ] POST /recipes/add — handle both modes, redirect to recipe detail on success\n\n#### Recipe edit/delete routes\n- [ ] POST /recipes/<id>/edit — update recipe, redirect back\n- [ ] POST /recipes/<id>/delete — delete recipe, redirect to /recipes\n\n### Shopping list page\n\n#### shopping_list.html (GET /shopping-list)\n- [ ] Show most recent consolidated shopping list (stored in session or DB)\n- [ ] Grouped by category (produce, meat, dairy, etc.) with category headers\n- [ ] Each item: ingredient name, quantity, unit, `from_meals` badges\n- [ ] Restock items visually distinguished (different background color or \"restock\" badge)\n- [ ] Disabled \"Order from Safeway\" button with \"Coming Soon\" tooltip\n- [ ] \"Copy to clipboard\" button — formats list as plain text\n- [ ] \"Export as JSON\" button — downloads raw JSON\n- [ ] Empty state: \"No shopping list yet. Plan some meals to get started.\"\n\n#### Shopping list generation\n- [ ] POST /shopping-list/generate — accepts `{meals: \"tikka masala, caesar salad\"}` form input\n- [ ] Runs full pipeline: meal_parser -> consolidator\n- [ ] Stores result and redirects to GET /shopping-list\n- [ ] Loading state while Claude processes (or synchronous with redirect)\n\n### Pantry page\n\n#### pantry.html (GET /pantry)\n- [ ] List all pantry staples with category\n- [ ] \"Add staple\" form: ingredient name, category dropdown\n- [ ] Remove button per item (with confirmation)\n- [ ] POST /pantry/add — add staple, redirect back\n- [ ] POST /pantry/<id>/remove — remove staple, redirect back\n\n### Brands page\n\n#### brands.html (GET /brands)\n- [ ] List all brand preferences grouped by type (preferred vs avoid)\n- [ ] Show: match target, match type (category/ingredient), brand name, notes\n- [ ] \"Add preference\" form: target, type dropdown, brand, preference type, notes\n- [ ] Remove button per preference\n- [ ] POST /brands/add — add preference, redirect back\n- [ ] POST /brands/<id>/remove — remove preference, redirect back\n\n### Preferences page\n\n#### preferences.html (GET /preferences)\n- [ ] Form showing all preferences as editable fields\n- [ ] Key fields: default_servings, default_units (imperial/metric), dietary_restrictions\n- [ ] POST /preferences — save all, redirect back with success flash\n\n## File Inventory\n\n```\ngrocery_butler/templates/\n├── recipes.html\n├── recipe_detail.html\n├── recipe_add.html\n├── shopping_list.html\n├── pantry.html\n├── brands.html\n└── preferences.html\n```\n\n## Blocked By\n\n#9 (base layout + Flask app + inventory page pattern), #7 (consolidator for shopping list generation)\n\n## Blocks\n\nNothing — this completes the web dashboard."
}
