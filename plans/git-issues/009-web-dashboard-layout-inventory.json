{
  "number": 9,
  "title": "Web dashboard: Flask app, base layout, and inventory page",
  "state": "open",
  "labels": [
    {"name": "phase:3-ui"},
    {"name": "priority:P1"},
    {"name": "component:frontend"}
  ],
  "milestone": {"title": "Phase 3: User Interfaces"},
  "body": "## Summary\n\nCreate the Flask app with base layout and the inventory page — the spec calls this \"the star\" of the dashboard. This establishes the web layer pattern that all other pages follow.\n\n## Context\n\nThe web dashboard shares the same SQLite database as the CLI (and eventually Discord bot). WAL mode enables concurrent reads. The design should feel like a lightweight admin dashboard — Django admin with better taste. Mobile-friendly. System fonts. No build step.\n\n## Acceptance Criteria\n\n### Flask app (grocery_butler/app.py)\n- [ ] Flask app factory or module-level app\n- [ ] Serves on `localhost:{FLASK_PORT}` (default 5000)\n- [ ] SQLite connection per request with WAL mode\n- [ ] Database path from config\n- [ ] Jinja2 templates from `grocery_butler/templates/`\n- [ ] Static files from `grocery_butler/static/`\n- [ ] Proper HTTP status codes (400, 404, 500)\n- [ ] Error handler pages\n\n### Base layout (templates/base.html)\n- [ ] HTML5 boilerplate with responsive meta viewport\n- [ ] Navigation bar with links: Dashboard, Recipes, Inventory, Pantry, Shopping List, Brands, Preferences\n- [ ] Active page indicator in nav\n- [ ] `{% block content %}` for page content\n- [ ] `{% block title %}` for page title\n- [ ] Links to `style.css` and `app.js`\n- [ ] System fonts (no Google Fonts)\n- [ ] Max-width container, stacks on small screens\n\n### Static assets\n\n#### static/css/style.css\n- [ ] CSS custom properties for colors: `--color-on-hand` (green), `--color-low` (yellow), `--color-out` (red), `--color-accent`, `--color-bg`, `--color-text`\n- [ ] Responsive: max-width container (~900px), fluid on mobile\n- [ ] Navigation styling\n- [ ] Card/row component for list items\n- [ ] Status badge styles (green/yellow/red)\n- [ ] Form styling\n- [ ] Table styling\n- [ ] Button styles (primary, danger, disabled)\n\n#### static/js/app.js\n- [ ] Vanilla JS, no framework\n- [ ] `updateInventoryStatus(ingredient, newStatus)` — fetch() POST to `/inventory/update`, update DOM without reload\n- [ ] Filter/search handler for inventory page\n- [ ] Flash message auto-dismiss\n\n### Inventory page (templates/inventory.html) — THE STAR\n\nRoutes:\n- [ ] `GET /inventory` — render inventory page\n- [ ] `POST /inventory/update` — AJAX endpoint: accepts `{ingredient, status}`, returns JSON\n- [ ] `POST /inventory/add` — add new tracked item, redirect back\n\nTemplate:\n- [ ] Each item as a card/row showing: display name, category, current status\n- [ ] Status toggle: clickable buttons for on_hand / low / out\n- [ ] Status changes via fetch() — no full page reload\n- [ ] Color coding: green (on_hand), yellow (low), red (out)\n- [ ] \"Add item\" form at the top: ingredient name, category dropdown, submit\n- [ ] Filter/search bar that filters items client-side\n- [ ] Empty state: friendly message when no items tracked\n- [ ] Restock badge: count of low/out items shown in nav or page header\n\n### Dashboard page (templates/dashboard.html)\n- [ ] `GET /` — render dashboard\n- [ ] Restock queue alert: \"N items need restocking\" with item list\n- [ ] Quick-add form: \"Plan meals\" text input that POSTs to `/shopping-list/generate`\n- [ ] Stats: recipe count, inventory item count\n- [ ] Empty state when nothing exists yet\n\n## Design Constraints\n\n- Mobile-first: will be checked on a phone\n- System fonts only\n- No npm, no React, no build step\n- Relative URLs everywhere (no hardcoded localhost)\n- Clean REST-ish route structure\n\n## File Inventory\n\n```\ngrocery_butler/\n├── app.py\n├── templates/\n│   ├── base.html\n│   ├── dashboard.html\n│   └── inventory.html\n├── static/\n│   ├── css/\n│   │   └── style.css\n│   └── js/\n│       └── app.js\n```\n\n## Blocked By\n\n#4 (recipe store — reads data), #5 (pantry manager — inventory CRUD)\n\n## Blocks\n\n#10 (remaining web pages build on this pattern)"
}
