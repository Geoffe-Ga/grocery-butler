{% extends "base.html" %}

{% block title %}Inventory - Grocery Butler{% endblock %}

{% block content %}
<h1>Inventory</h1>

<section class="add-item-section">
    <h2>Add Item</h2>
    <form action="/inventory/add" method="post" class="add-item-form">
        <div class="form-row">
            <div class="form-group">
                <label for="ingredient">Ingredient</label>
                <input type="text" id="ingredient" name="ingredient" required
                       placeholder="e.g. milk">
            </div>
            <div class="form-group">
                <label for="display_name">Display Name</label>
                <input type="text" id="display_name" name="display_name"
                       placeholder="e.g. Whole Milk">
            </div>
            <div class="form-group">
                <label for="category">Category</label>
                <select id="category" name="category">
                    <option value="">-- Select --</option>
                    {% for cat in categories %}
                    <option value="{{ cat }}">{{ cat }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label for="status">Status</label>
                <select id="status" name="status">
                    {% for s in statuses %}
                    <option value="{{ s }}"{% if s == "on_hand" %} selected{% endif %}>{{ s }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group form-group-btn">
                <button type="submit" class="btn btn-primary">Add</button>
            </div>
        </div>
    </form>
</section>

<section class="filter-section">
    <input type="text" id="inventory-search" class="search-input"
           placeholder="Search inventory..." aria-label="Search inventory">
</section>

{% if items %}
<section class="inventory-list" id="inventory-list">
    {% for item in items %}
    <div class="inventory-card" data-ingredient="{{ item.ingredient }}"
         data-name="{{ item.display_name|lower }}"
         data-category="{{ item.category.value if item.category else '' }}">
        <div class="inventory-card-info">
            <h3 class="inventory-card-name">{{ item.display_name }}</h3>
            {% if item.category %}
            <span class="inventory-card-category">{{ item.category.value }}</span>
            {% endif %}
        </div>
        <div class="inventory-card-status">
            <div class="status-buttons" data-ingredient="{{ item.ingredient }}">
                {% for s in statuses %}
                <button type="button"
                        class="btn btn-status btn-status-{{ s }}{% if item.status.value == s %} active{% endif %}"
                        data-status="{{ s }}"
                        aria-label="Set {{ item.display_name }} to {{ s }}">
                    {{ s }}
                </button>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endfor %}
</section>
{% else %}
<section class="empty-state">
    <p>No items in your inventory yet. Add one above to get started.</p>
</section>
{% endif %}
{% endblock %}
